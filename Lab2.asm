ORG 0000H
LJMP START
LJMP MAIN

ORG 000BH
LJMP T0INT

ORG 1000H
START:
	MOV 30H,#00H	
	MOV 31H,#00H
	MOV 32H,#00H
	MOV 33H,#00H
	MOV R0,#00H
	MOV R2,#14H

MAIN:
	MOV TMOD,#01H	
	MOV TH0,#3CH
	MOV TL0,#0B0H
	SETB EA
	SETB ET0
	SETB TR0
	LCALL DISPLAY
	SJMP $

DISPLAY:
	MOV R1,30H
	MOV DPTR,#DISTABLE
	MOV A,R1
	MOVC A,@A+DPTR
	MOV DPTR,#7FF8H
	MOVX @DPTR,A

	MOV R1,31H
	MOV DPTR,#DISTABLE
	MOV A,R1
	MOVC A,@A+DPTR
	MOV DPTR,#7FF9H
	MOVX @DPTR,A

	MOV R1,32H
	MOV DPTR,#DISTABLE
	MOV A,R1
	MOVC A,@A+DPTR
	MOV DPTR,#7FFAH
	MOVX @DPTR,A

	MOV R1,33H
	MOV DPTR,#DISTABLE
	MOV A,R1
	MOVC A,@A+DPTR
	MOV DPTR,#7FFBH
	MOVX @DPTR,A
	RET

COUNT:
	INC 30H
	MOV A,30H
	CJNE A,#0AH,COUNTOUT

	MOV 30H,#00H
	INC 31H
	MOV A,31H
	CJNE A,#0AH,COUNTOUT

	MOV 31H,#00H
	INC 32H
	MOV A,32H
	CJNE A,#0AH,COUNTOUT

	MOV 32H,#00H
	INC 33H
	MOV A,33H
	CJNE A,#0AH,COUNTOUT
	MOV 33H,#00H
COUNTOUT:
	RET

DELAY10MS:
	MOV R3,#20
DELAY1:
	MOV R4,#249
	DJNZ R4,$
	DJNZ R3,DELAY1
	RET

ORG 2000H
T0INT:
	MOV TH0,#3CH
	MOV TL0,#0B0H
	JNB P1.0,SUSPEND
	JNB P1.2,RESET
	DJNZ R2,T0INTOUT
	LCALL COUNT
	MOV R2,#14H
T0INTOUT:
	LCALL DISPLAY
	RETI

SUSPEND:
	LCALL DELAY10MS
	JB P1.0,SUSPENDOUT
SUSPEND1:
	LCALL DISPLAY
	JNB P1.1,CONTINUE
	JNB P1.2,RESET
	CJNE R0,#01H,SUSPEND1
	RETI
SUSPENDOUT:
	RETI

CONTINUE:
	LCALL DELAY10MS
	JB P1.1,SUSPEND
	RETI

RESET:
	LCALL DELAY10MS
	JB P1.2,RESETOUT
	MOV 30H,#00H	
	MOV 31H,#00H
	MOV 32H,#00H
	MOV 33H,#00H
	MOV R0,#00H
	MOV R2,#14H
	RETI
RESETOUT:
	RETI

DISTABLE:
DB 0C0H,0F9H,0A4H,0B0H
DB 99H,92H,82H,0F8H
DB 80H,90H,88H,83H
DB 0C6H,0A1H,86H,8EH
END